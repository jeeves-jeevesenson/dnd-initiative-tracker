{
  "schema_id": "inittracker.character.v2",
  "schema_version": 1,
  "readme_path": "players/README.md",
  "sections": [
    {
      "id": "root",
      "label": "Root Level Fields",
      "readme_heading": "Root Level Fields",
      "type": "object",
      "fields": [
        {
          "key": "format_version",
          "label": "Format Version",
          "type": "integer",
          "required": true,
          "default": 2
        },
        {
          "key": "name",
          "label": "Name",
          "type": "string",
          "required": true,
          "default": "",
          "placeholder": "e.g., Thalia Brightblade",
          "help": "Enter the character name as it should appear in the tracker."
        },
        {
          "key": "player",
          "label": "Player",
          "type": "string",
          "default": "",
          "placeholder": "e.g., Sam",
          "help": "Use the player's display name or nickname."
        },
        {
          "key": "campaign",
          "label": "Campaign",
          "type": "string",
          "default": ""
        },
        {
          "key": "ip",
          "label": "IP Address",
          "type": "string",
          "default": ""
        }
      ]
    },
    {
      "id": "identity",
      "label": "Identity",
      "readme_heading": "Identity Section",
      "type": "object",
      "path": ["identity"],
      "fields": [
        {"key": "pronouns", "label": "Pronouns", "type": "string", "default": "", "placeholder": "e.g., she/her"},
        {"key": "ancestry", "label": "Ancestry", "type": "string", "default": "", "placeholder": "e.g., Half-elf"},
        {"key": "background", "label": "Background", "type": "string", "default": "", "placeholder": "e.g., Acolyte"},
        {"key": "alignment", "label": "Alignment", "type": "string", "default": "", "placeholder": "e.g., Neutral Good"},
        {"key": "description", "label": "Description", "type": "string", "default": "", "placeholder": "e.g., Calm scholar with a silver staff"}
      ]
    },
    {
      "id": "leveling",
      "label": "Leveling",
      "readme_heading": "Leveling Section",
      "type": "object",
      "path": ["leveling"],
      "fields": [
        {"key": "level", "label": "Total Level", "type": "integer", "default": 1},
        {
          "key": "classes",
          "label": "Classes",
          "type": "array",
          "repeatable": true,
          "items": {
            "type": "object",
            "fields": [
              {"key": "name", "label": "Class Name", "type": "string", "default": ""},
              {"key": "subclass", "label": "Subclass", "type": "string", "default": ""},
              {"key": "level", "label": "Class Level", "type": "integer", "default": 1}
            ]
          },
          "default": [
            {"name": "", "subclass": "", "level": 1}
          ]
        }
      ]
    },
    {
      "id": "abilities",
      "label": "Abilities",
      "readme_heading": "Abilities Section",
      "type": "object",
      "path": ["abilities"],
      "fields": [
        {"key": "str", "label": "STR", "type": "integer", "default": 10},
        {"key": "dex", "label": "DEX", "type": "integer", "default": 10},
        {"key": "con", "label": "CON", "type": "integer", "default": 10},
        {"key": "int", "label": "INT", "type": "integer", "default": 10},
        {"key": "wis", "label": "WIS", "type": "integer", "default": 10},
        {"key": "cha", "label": "CHA", "type": "integer", "default": 10}
      ]
    },
    {
      "id": "proficiency",
      "label": "Proficiency",
      "readme_heading": "Proficiency Section",
      "type": "object",
      "path": ["proficiency"],
      "fields": [
        {"key": "bonus", "label": "Proficiency Bonus", "type": "integer", "default": 2},
        {
          "key": "saves",
          "label": "Save Proficiencies",
          "type": "array",
          "repeatable": true,
          "items": {"type": "string", "default": "", "placeholder": "e.g., STR"},
          "default": [],
          "placeholder": "e.g., STR, CON",
          "help": "List the saving throws the character is proficient in."
        },
        {
          "key": "skills",
          "label": "Skills",
          "type": "object",
          "fields": [
            {
              "key": "proficient",
              "label": "Proficient Skills",
              "type": "array",
              "repeatable": true,
              "items": {"type": "string", "default": "", "placeholder": "e.g., Stealth"},
              "default": [],
              "help": "Add each skill proficiency as a separate entry."
            },
            {
              "key": "expertise",
              "label": "Expertise",
              "type": "array",
              "repeatable": true,
              "items": {"type": "string", "default": "", "placeholder": "e.g., Perception"},
              "default": [],
              "help": "List skills with expertise as separate entries."
            }
          ]
        },
        {
          "key": "tools",
          "label": "Tools",
          "type": "array",
          "repeatable": true,
          "items": {"type": "string", "default": "", "placeholder": "e.g., Thieves' tools"},
          "default": [],
          "help": "Add each tool proficiency as a separate entry."
        },
        {
          "key": "languages",
          "label": "Languages",
          "type": "array",
          "repeatable": true,
          "items": {"type": "string", "default": "", "placeholder": "e.g., Common"},
          "default": [],
          "help": "List each language the character can speak."
        }
      ]
    },
    {
      "id": "vitals",
      "label": "Vitals",
      "readme_heading": "Vitals Section",
      "type": "object",
      "path": ["vitals"],
      "fields": [
        {"key": "max_hp", "label": "Max HP", "type": "integer", "default": 1},
        {"key": "current_hp", "label": "Current HP", "type": "integer", "default": 1},
        {"key": "temp_hp", "label": "Temp HP", "type": "integer", "default": 0},
        {
          "key": "hit_dice",
          "label": "Hit Dice",
          "type": "object",
          "fields": [
            {
              "key": "die",
              "label": "Hit Die",
              "type": "string",
              "default": "d8",
              "help": "Auto-filled from class selection (composite if multiclass). Edit to override."
            },
            {
              "key": "total",
              "label": "Total",
              "type": "integer",
              "default": 1,
              "help": "Auto-filled from total level. Edit to override."
            },
            {"key": "spent", "label": "Spent", "type": "integer", "default": 0}
          ]
        },
        {
          "key": "speed",
          "label": "Speed",
          "type": "object",
          "fields": [
            {"key": "walk", "label": "Walk", "type": "integer", "default": 30},
            {"key": "climb", "label": "Climb", "type": "integer", "default": 0},
            {"key": "fly", "label": "Fly", "type": "integer", "default": 0},
            {"key": "swim", "label": "Swim", "type": "integer", "default": 0}
          ]
        },
        {
          "key": "initiative",
          "label": "Initiative",
          "type": "object",
          "fields": [
            {
              "key": "formula",
              "label": "Formula",
              "type": "string",
              "default": "dex_mod",
              "placeholder": "dex_mod",
              "help": "Example: dex_mod. Supported tokens: dex_mod, wis_mod, prof."
            }
          ]
        },
        {
          "key": "passive_perception",
          "label": "Passive Perception",
          "type": "object",
          "fields": [
            {
              "key": "formula",
              "label": "Formula",
              "type": "string",
              "default": "10 + wis_mod",
              "placeholder": "10 + wis_mod",
              "help": "Example: 10 + wis_mod. Supported tokens: dex_mod, wis_mod, prof."
            }
          ]
        }
      ]
    },
    {
      "id": "defenses",
      "label": "Defenses",
      "readme_heading": "Defenses Section",
      "type": "object",
      "path": ["defenses"],
      "fields": [
        {
          "key": "ac",
          "label": "Armor Class",
          "type": "object",
          "fields": [
            {
              "key": "sources",
              "label": "AC Sources",
              "type": "array",
              "repeatable": true,
              "items": {
                "type": "object",
                "fields": [
                  {"key": "id", "label": "ID", "type": "string", "default": ""},
                  {"key": "label", "label": "Label", "type": "string", "default": ""},
                  {"key": "when", "label": "When", "type": "string", "default": "always"},
                  {
                    "key": "base_formula",
                    "label": "Base Formula",
                    "type": "string",
                    "default": "10 + dex_mod",
                    "placeholder": "10 + dex_mod",
                    "help": "Example: 10 + dex_mod. Supported tokens: dex_mod, wis_mod, prof."
                  }
                ]
              },
              "default": [
                {"id": "unarmored", "label": "Unarmored", "when": "always", "base_formula": "10 + dex_mod"}
              ]
            },
            {
              "key": "bonuses",
              "label": "AC Bonuses",
              "type": "array",
              "repeatable": true,
              "items": {
                "type": "object",
                "fields": [
                  {"key": "id", "label": "ID", "type": "string", "default": ""},
                  {"key": "label", "label": "Label", "type": "string", "default": ""},
                  {"key": "value", "label": "Value", "type": "integer", "default": 0},
                  {"key": "when", "label": "When", "type": "string", "default": ""}
                ]
              },
              "default": []
            }
          ]
        },
        {
          "key": "resistances",
          "label": "Resistances",
          "type": "array",
          "repeatable": true,
          "items": {"type": "string", "default": ""},
          "default": []
        },
        {
          "key": "immunities",
          "label": "Immunities",
          "type": "array",
          "repeatable": true,
          "items": {"type": "string", "default": ""},
          "default": []
        },
        {
          "key": "vulnerabilities",
          "label": "Vulnerabilities",
          "type": "array",
          "repeatable": true,
          "items": {"type": "string", "default": ""},
          "default": []
        }
      ]
    },
    {
      "id": "attacks",
      "label": "Attacks",
      "readme_heading": "Attacks Section",
      "type": "object",
      "path": ["attacks"],
      "fields": [
        {
          "key": "melee_attack_mod",
          "label": "Melee Attack Modifier",
          "type": "integer",
          "default": 0,
          "help": "Auto-filled from STR modifier + proficiency. Edit to override."
        },
        {
          "key": "ranged_attack_mod",
          "label": "Ranged Attack Modifier",
          "type": "integer",
          "default": 0,
          "help": "Auto-filled from DEX modifier + proficiency. Edit to override."
        },
        {
          "key": "weapon_to_hit",
          "label": "Weapon To-Hit",
          "type": "integer",
          "default": 0,
          "help": "Auto-filled from the higher of STR/DEX modifiers + proficiency. Edit to override."
        }
      ]
    },
    {
      "id": "resources",
      "label": "Resources",
      "readme_heading": "Resources Section",
      "type": "object",
      "path": ["resources"],
      "fields": [
        {
          "key": "pools",
          "label": "Resource Pools",
          "type": "array",
          "repeatable": true,
          "items": {
            "type": "object",
            "fields": [
              {"key": "id", "label": "ID", "type": "string", "default": ""},
              {"key": "label", "label": "Label", "type": "string", "default": ""},
              {"key": "current", "label": "Current", "type": "integer", "default": 0},
              {"key": "max_formula", "label": "Max Formula", "type": "string", "default": "1"},
              {"key": "reset", "label": "Reset", "type": "string", "default": "long_rest"}
            ]
          },
          "default": []
        }
      ]
    },
    {
      "id": "features",
      "label": "Features",
      "readme_heading": "Features Section",
      "type": "array",
      "path": ["features"],
      "repeatable": true,
      "items": {
        "type": "object",
        "fields": [
          {"key": "id", "label": "ID", "type": "string", "default": ""},
          {"key": "name", "label": "Name", "type": "string", "default": ""},
          {"key": "category", "label": "Category", "type": "string", "default": ""},
          {"key": "source", "label": "Source", "type": "string", "default": ""},
          {"key": "description", "label": "Description", "type": "string", "default": ""},
          {
            "key": "grants",
            "label": "Grants",
            "type": "object",
            "fields": [
              {
                "key": "pools",
                "label": "Granted Pools",
                "type": "array",
                "repeatable": true,
                "items": {
                  "type": "object",
                  "fields": [
                    {"key": "id", "label": "ID", "type": "string", "default": ""},
                    {"key": "label", "label": "Label", "type": "string", "default": ""},
                    {"key": "max_formula", "label": "Max Formula", "type": "string", "default": "1"},
                    {"key": "reset", "label": "Reset", "type": "string", "default": "long_rest"}
                  ]
                },
                "default": []
              },
              {
                "key": "spells",
                "label": "Granted Spells",
                "type": "object",
                "fields": [
                  {
                    "key": "cantrips",
                    "label": "Cantrips",
                    "type": "array",
                    "repeatable": true,
                    "items": {"type": "string", "default": ""},
                    "default": []
                  },
                  {
                    "key": "casts",
                    "label": "Spell Casts",
                    "type": "array",
                    "repeatable": true,
                    "items": {
                      "type": "object",
                      "fields": [
                        {"key": "spell", "label": "Spell", "type": "string", "default": ""},
                        {"key": "action_type", "label": "Action Type", "type": "string", "default": "action"},
                        {
                          "key": "consumes",
                          "label": "Consumes",
                          "type": "object",
                          "fields": [
                            {"key": "pool", "label": "Pool", "type": "string", "default": ""},
                            {"key": "cost", "label": "Cost", "type": "integer", "default": 1}
                          ]
                        }
                      ]
                    },
                    "default": []
                  }
                ]
              },
              {
                "key": "actions",
                "label": "Actions",
                "type": "array",
                "repeatable": true,
                "items": {
                  "type": "object",
                  "fields": [
                    {"key": "name", "label": "Name", "type": "string", "default": ""},
                    {"key": "type", "label": "Type", "type": "string", "default": "action"},
                    {"key": "description", "label": "Description", "type": "string", "default": ""},
                    {
                      "key": "uses",
                      "label": "Uses",
                      "type": "object",
                      "fields": [
                        {"key": "pool", "label": "Pool", "type": "string", "default": ""},
                        {"key": "cost", "label": "Cost", "type": "integer", "default": 1}
                      ]
                    }
                  ]
                },
                "default": []
              },
              {
                "key": "modifiers",
                "label": "Modifiers",
                "type": "array",
                "repeatable": true,
                "items": {
                  "type": "object",
                  "fields": [
                    {"key": "target", "label": "Target", "type": "string", "default": ""},
                    {"key": "mode", "label": "Mode", "type": "string", "default": "add"},
                    {"key": "value", "label": "Value", "type": ["string", "number", "integer"], "default": 0},
                    {"key": "when", "label": "When", "type": "string", "default": ""}
                  ]
                },
                "default": []
              },
              {
                "key": "damage_riders",
                "label": "Damage Riders",
                "type": "array",
                "repeatable": true,
                "items": {
                  "type": "object",
                  "fields": [
                    {"key": "name", "label": "Name", "type": "string", "default": ""},
                    {"key": "when", "label": "When", "type": "string", "default": ""},
                    {"key": "dice", "label": "Dice", "type": "string", "default": ""},
                    {"key": "dtype", "label": "Damage Type", "type": "string", "default": "none"}
                  ]
                },
                "default": []
              }
            ]
          }
        ]
      },
      "default": []
    },
    {
      "id": "actions",
      "label": "Actions",
      "readme_heading": "Actions/Reactions/Bonus Actions",
      "type": "array",
      "path": ["actions"],
      "repeatable": true,
      "items": {
        "type": "object",
        "fields": [
          {"key": "name", "label": "Name", "type": "string", "default": ""},
          {"key": "description", "label": "Description", "type": "string", "default": ""},
          {"key": "type", "label": "Type", "type": "string", "default": "action"}
        ]
      },
      "default": [
        {
          "name": "Attack",
          "description": "Make a weapon or unarmed attack against a target within range.",
          "type": "action"
        },
        {
          "name": "Dash",
          "description": "Gain extra movement for the current turn equal to your speed.",
          "type": "action"
        },
        {
          "name": "Disengage",
          "description": "Your movement does not provoke opportunity attacks for the rest of the turn.",
          "type": "action"
        },
        {
          "name": "Dodge",
          "description": "Until the start of your next turn, attack rolls against you have disadvantage if you can see the attacker, and you make Dexterity saves with advantage.",
          "type": "action"
        },
        {
          "name": "Help",
          "description": "Aid a creature in the next ability check or attack roll against a target within 5 feet of you.",
          "type": "action"
        },
        {
          "name": "Hide",
          "description": "Attempt to hide by making a Dexterity (Stealth) check.",
          "type": "action"
        },
        {
          "name": "Influence",
          "description": "Attempt to influence a creature through conversation, bargaining, or intimidation.",
          "type": "action"
        },
        {
          "name": "Magic",
          "description": "Cast a spell or use a magical feature that takes an action.",
          "type": "action"
        },
        {
          "name": "Ready",
          "description": "Prepare an action and a trigger; use your reaction to perform it when the trigger occurs.",
          "type": "action"
        },
        {
          "name": "Search",
          "description": "Devote attention to finding something by making a Wisdom (Perception) or Intelligence (Investigation) check.",
          "type": "action"
        },
        {
          "name": "Study",
          "description": "Focus on detailed observation or research to gain information about a creature, object, or situation.",
          "type": "action"
        },
        {
          "name": "Utilize",
          "description": "Use an object or interact with the environment in a significant way.",
          "type": "action"
        }
      ]
    },
    {
      "id": "reactions",
      "label": "Reactions",
      "readme_heading": "Actions/Reactions/Bonus Actions",
      "type": "array",
      "path": ["reactions"],
      "repeatable": true,
      "items": {
        "type": "object",
        "fields": [
          {"key": "name", "label": "Name", "type": "string", "default": ""},
          {"key": "description", "label": "Description", "type": "string", "default": ""},
          {"key": "type", "label": "Type", "type": "string", "default": "reaction"}
        ]
      },
      "default": [
        {
          "name": "Opportunity Attack",
          "description": "When a hostile creature you can see moves out of your reach, you can use your reaction to make one melee attack against it.",
          "type": "reaction"
        },
        {
          "name": "Reaction",
          "description": "You can take a reaction when a trigger occurs. A reaction is only available once per round.",
          "type": "reaction"
        }
      ]
    },
    {
      "id": "bonus_actions",
      "label": "Bonus Actions",
      "readme_heading": "Actions/Reactions/Bonus Actions",
      "type": "array",
      "path": ["bonus_actions"],
      "repeatable": true,
      "items": {
        "type": "object",
        "fields": [
          {"key": "name", "label": "Name", "type": "string", "default": ""},
          {"key": "description", "label": "Description", "type": "string", "default": ""},
          {"key": "type", "label": "Type", "type": "string", "default": "bonus_action"}
        ]
      },
      "default": [
        {
          "name": "Bonus Action",
          "description": "You can take a bonus action only when a feature, spell, or ability says you can.",
          "type": "bonus_action"
        }
      ]
    },
    {
      "id": "spellcasting",
      "label": "Spellcasting",
      "readme_heading": "Spellcasting Section",
      "type": "object",
      "path": ["spellcasting"],
      "fields": [
        {"key": "enabled", "label": "Enabled", "type": "boolean", "default": false},
        {
          "key": "spell_yaml_paths",
          "label": "Spell YAML Paths",
          "type": "array",
          "repeatable": true,
          "items": {"type": "string", "default": ""},
          "default": ["./Spells"]
        },
        {"key": "casting_ability", "label": "Casting Ability", "type": "string", "default": ""},
        {
          "key": "save_dc_formula",
          "label": "Save DC Formula",
          "type": "string",
          "default": "8 + prof + casting_mod",
          "help": "Auto-filled when casting ability and proficiency are set. Edit to override."
        },
        {
          "key": "spell_attack_formula",
          "label": "Spell Attack Formula",
          "type": "string",
          "default": "prof + casting_mod",
          "help": "Auto-filled when casting ability and proficiency are set. Edit to override."
        },
        {
          "key": "cantrips",
          "label": "Cantrips",
          "type": "object",
          "fields": [
            {"key": "max", "label": "Max", "type": "integer", "default": 0},
            {
              "key": "known",
              "label": "Known",
              "type": "array",
              "repeatable": true,
              "items": {"type": "string", "default": ""},
              "default": []
            }
          ]
        },
        {
          "key": "known_spells",
          "label": "Known Spells",
          "type": "object",
          "fields": [
            {"key": "max", "label": "Max", "type": "integer", "default": 0},
            {
              "key": "known",
              "label": "Known",
              "type": "array",
              "repeatable": true,
              "items": {"type": "string", "default": ""},
              "default": []
            }
          ]
        },
        {
          "key": "prepared_spells",
          "label": "Prepared Spells",
          "type": "object",
          "fields": [
            {"key": "max_formula", "label": "Max Formula", "type": "string", "default": "0"},
            {
              "key": "prepared",
              "label": "Prepared",
              "type": "array",
              "repeatable": true,
              "items": {"type": "string", "default": ""},
              "default": []
            }
          ]
        },
        {
          "key": "spell_slots",
          "label": "Spell Slots",
          "type": "object",
          "fields": [
            {
              "key": "1",
              "label": "Level 1 Slots",
              "type": "object",
              "fields": [
                {"key": "max", "label": "Max", "type": "integer", "default": 0},
                {"key": "current", "label": "Current", "type": "integer", "default": 0}
              ]
            },
            {
              "key": "2",
              "label": "Level 2 Slots",
              "type": "object",
              "fields": [
                {"key": "max", "label": "Max", "type": "integer", "default": 0},
                {"key": "current", "label": "Current", "type": "integer", "default": 0}
              ]
            },
            {
              "key": "3",
              "label": "Level 3 Slots",
              "type": "object",
              "fields": [
                {"key": "max", "label": "Max", "type": "integer", "default": 0},
                {"key": "current", "label": "Current", "type": "integer", "default": 0}
              ]
            },
            {
              "key": "4",
              "label": "Level 4 Slots",
              "type": "object",
              "fields": [
                {"key": "max", "label": "Max", "type": "integer", "default": 0},
                {"key": "current", "label": "Current", "type": "integer", "default": 0}
              ]
            },
            {
              "key": "5",
              "label": "Level 5 Slots",
              "type": "object",
              "fields": [
                {"key": "max", "label": "Max", "type": "integer", "default": 0},
                {"key": "current", "label": "Current", "type": "integer", "default": 0}
              ]
            },
            {
              "key": "6",
              "label": "Level 6 Slots",
              "type": "object",
              "fields": [
                {"key": "max", "label": "Max", "type": "integer", "default": 0},
                {"key": "current", "label": "Current", "type": "integer", "default": 0}
              ]
            },
            {
              "key": "7",
              "label": "Level 7 Slots",
              "type": "object",
              "fields": [
                {"key": "max", "label": "Max", "type": "integer", "default": 0},
                {"key": "current", "label": "Current", "type": "integer", "default": 0}
              ]
            },
            {
              "key": "8",
              "label": "Level 8 Slots",
              "type": "object",
              "fields": [
                {"key": "max", "label": "Max", "type": "integer", "default": 0},
                {"key": "current", "label": "Current", "type": "integer", "default": 0}
              ]
            },
            {
              "key": "9",
              "label": "Level 9 Slots",
              "type": "object",
              "fields": [
                {"key": "max", "label": "Max", "type": "integer", "default": 0},
                {"key": "current", "label": "Current", "type": "integer", "default": 0}
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "inventory",
      "label": "Inventory",
      "readme_heading": "Inventory Section",
      "type": "object",
      "path": ["inventory"],
      "fields": [
        {
          "key": "currency",
          "label": "Currency",
          "type": "object",
          "fields": [
            {"key": "gp", "label": "GP", "type": "integer", "default": 0},
            {"key": "sp", "label": "SP", "type": "integer", "default": 0},
            {"key": "cp", "label": "CP", "type": "integer", "default": 0}
          ]
        },
        {
          "key": "items",
          "label": "Items",
          "type": "array",
          "repeatable": true,
          "items": {
            "type": "object",
            "fields": [
              {"key": "name", "label": "Name", "type": "string", "default": ""},
              {"key": "quantity", "label": "Quantity", "type": "integer", "default": 1},
              {"key": "description", "label": "Description", "type": "string", "default": ""}
            ]
          },
          "default": []
        }
      ]
    },
    {
      "id": "notes",
      "label": "Notes",
      "readme_heading": "Notes Section",
      "type": "map",
      "path": ["notes"],
      "value_type": "string",
      "default": {}
    }
  ]
}
